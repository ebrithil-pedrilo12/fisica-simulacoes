<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Balança Digital — Algarismos Significativos (Tabela da Aula)</title>
  <style>
    :root{ --bg:#0f1222; --panel:#171b35; --muted:#9aa3b2; --text:#e6ebf2; --accent:#6ee7b7; --accent-2:#60a5fa; --danger:#f87171; --shadow:0 10px 30px rgba(0,0,0,.35) }
    *{box-sizing:border-box}
    html,body{height:100%;background:radial-gradient(1200px 600px at 20% 0%, #171b35 0%, #0f1222 50%, #0b0e1a 100%);color:var(--text);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";margin:0}
    .wrap{max-width:1100px;margin:32px auto 64px;padding:0 20px}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:18px}
    header h1{font-size:clamp(20px,3vw,28px);margin:0;letter-spacing:.2px}
    header .hint{color:var(--muted);font-size:14px;opacity:.9}
    .grid{display:grid;grid-template-columns:1.2fr .9fr;gap:18px}
    @media (max-width:920px){.grid{grid-template-columns:1fr}}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.06);border-radius:14px;box-shadow:var(--shadow);padding:16px}
    .label{color:var(--muted);font-size:13px;letter-spacing:.3px;text-transform:uppercase}
    .stack{display:flex;flex-direction:column;gap:10px}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .grow{flex:1}
    .btn{appearance:none;background:linear-gradient(180deg,#1b2242,#141a35);color:var(--text);border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:10px 14px;font-weight:600;cursor:pointer;transition:transform .03s,background .2s}
    .btn:active{transform:translateY(1px) scale(.99)}
    .btn.secondary{background:linear-gradient(180deg,#13203a,#0f192e)}
    .btn.ghost{background:transparent;border-color:rgba(255,255,255,.18);color:var(--muted);font-weight:500}
    .pill{display:inline-flex;align-items:center;gap:8px;background:rgba(96,165,250,.12);border:1px solid rgba(96,165,250,.25);color:#bfdbfe;padding:8px 12px;border-radius:999px;font-size:14px}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono";background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.15);padding:1px 6px;border-radius:6px;font-size:12px;color:#e5e7eb}
    .scale{display:flex;flex-direction:column;gap:14px;padding:18px;border-radius:12px;background:linear-gradient(180deg,#0b101e,#0f1526);border:1px solid rgba(255,255,255,.06)}
    .display{background:#0b0f13;border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:18px 18px;min-height:84px;display:flex;align-items:center;justify-content:space-between;gap:12px;box-shadow:inset 0 0 18px rgba(0,0,0,.6)}
    .digits{flex:1;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:clamp(28px,6vw,54px);letter-spacing:.06em;color:#a7f3d0;text-shadow:0 0 6px rgba(110,231,183,.55),0 0 22px rgba(110,231,183,.25);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .unit{margin-left:12px;font-weight:600;color:#93c5fd;text-shadow:0 0 10px rgba(96,165,250,.35);white-space:nowrap}
    .meta{display:grid;gap:10px;grid-template-columns:repeat(2,minmax(0,1fr))}
    @media (max-width:520px){.meta{grid-template-columns:1fr}}
    .meta .rowmeta{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:10px 12px;display:flex;align-items:center;justify-content:space-between;gap:10px}
    .toast{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:rgba(11,15,19,.9);color:#e5e7eb;border:1px solid rgba(255,255,255,.12);padding:10px 14px;border-radius:10px;box-shadow:var(--shadow);opacity:0;transition:opacity .25s ease;pointer-events:none;font-size:14px}
    .toast.show{opacity:1}
    footer{margin-top:14px;color:var(--muted);font-size:13px}
    code.inline{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono"}
    .highlight { color:#fbbf24; text-shadow:0 0 6px rgba(251,191,36,.6), 0 0 20px rgba(251,191,36,.4) }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Balança Digital — Algarismos Significativos</h1>
      <div class="hint">Atalhos: <span class="kbd">←</span>/<span class="kbd">→</span> exemplo · <span class="kbd">↑</span>/<span class="kbd">↓</span> alg. sig. · <span class="kbd">R</span> reset</div>
    </header>

    <div class="grid">
      <section class="card">
        <div class="stack">
          <div class="label">Leitura da balança</div>
          <div class="scale" aria-live="polite">
            <div class="display">
              <div class="digits" id="digits">—</div>
              <div class="unit" id="unit"></div>
            </div>

            <div class="row">
              <button class="btn" id="prevBtn">← Anterior</button>
              <button class="btn" id="nextBtn">Próximo →</button>
              <span class="pill">Exemplo <span id="exampleIndex">1</span>/<span id="exampleCount">—</span></span>
              <span class="grow"></span>
              <button class="btn secondary" id="decSf">−</button>
              <span class="pill">Alg. sig.: <strong id="sfLabel">3</strong></span>
              <button class="btn secondary" id="incSf">+</button>
              <button class="btn ghost" id="resetBtn">Reset</button>
            </div>

            <div class="meta">
              <div class="rowmeta"><span>Rótulo</span><strong id="labelValue">—</strong></div>
              <div class="rowmeta"><span>Valor original</span><strong id="rawValue">—</strong></div>
              <div class="rowmeta"><span>Arredondado (alg. sig.)</span><strong id="roundedValue">—</strong></div>
              <div class="rowmeta"><span>Notação científica</span><strong id="sciValue">—</strong></div>
              <div class="rowmeta"><span>Resolução do instrumento</span><strong id="resolution">—</strong></div>
            </div>
          </div>

          <footer>
            Use <span class="kbd">↑</span>/<span class="kbd">↓</span> para mudar os algarismos significativos e <span class="kbd">←</span>/<span class="kbd">→</span> para navegar pelos casos I, II e III.
          </footer>
        </div>
      </section>

      <aside class="card">
        <div class="stack">
          <div class="label">Sobre</div>
          <p>Os exemplos reproduzem a tabela usada em aula (I, II e III). O “Valor original” preserva a formatação (vírgula e zeros). O mostrador destaca o último dígito significativo conforme a seleção.</p>
          <ul>
            <li><strong>Valor original</strong>: texto da tabela.</li>
            <li><strong>Arredondado</strong>: com <span id="sfInline">3</span> alg. sig.</li>
            <li><strong>Notação científica</strong>: com os mesmos algarismos significativos.</li>
          </ul>
        </div>
      </aside>
    </div>
  </div>

  <div class="toast" id="toast">Dica: use ↑/↓ para mudar os algarismos significativos.</div>

  <script>
    // ===== EXEMPLOS DA TABELA (com formatação preservada em rawStr) =====
    const examples = [
      // I)
      { label:"I-a", rawStr:"7",       value:7,        unit:"", resolution:"" },
      { label:"I-b", rawStr:"7,41",    value:7.41,     unit:"", resolution:"" },
      { label:"I-c", rawStr:"7,414",   value:7.414,    unit:"", resolution:"" },
      { label:"I-d", rawStr:"7,4",     value:7.4,      unit:"", resolution:"" },

      // II)
      { label:"II-a", rawStr:"7,40",     value:7.40,    unit:"", resolution:"" },
      { label:"II-b", rawStr:"7,0000",   value:7.0000,  unit:"", resolution:"" },
      { label:"II-c", rawStr:"7,04",     value:7.04,    unit:"", resolution:"" },
      { label:"II-d", rawStr:"7,0004",   value:7.0004,  unit:"", resolution:"" },
      { label:"II-e", rawStr:"7,0400",   value:7.0400,  unit:"", resolution:"" },
      { label:"II-f", rawStr:"700,4",    value:700.4,   unit:"", resolution:"" },

      // III)
      { label:"III-a", rawStr:",007",    value:0.007,    unit:"", resolution:"" },
      { label:"III-b", rawStr:"0,007",   value:0.007,    unit:"", resolution:"" },
      { label:"III-c", rawStr:"0,00746", value:0.00746,  unit:"", resolution:"" },
      { label:"III-d", rawStr:"0,00007", value:0.00007,  unit:"", resolution:"" },
      { label:"III-e", rawStr:"0,00700", value:0.00700,  unit:"", resolution:"" },
      { label:"III-f", rawStr:"700,007", value:700.007,  unit:"", resolution:"" }
    ];

    // ===== Estado =====
    let idx = 0;
    let sigFigs = 3;
    const MIN_SF = 1, MAX_SF = 8;

    // ===== Helpers =====
    function setText(id, txt){ document.getElementById(id).textContent = txt; }

    function formatSci(num, n){
      return Number(num).toExponential(Math.max(0, n-1));
    }

    // monta o mostrador com o ÚLTIMO dígito significativo destacado
    function formatDisplayHighlighted(num, n){
      if (!isFinite(num)) return String(num);
      const p = Number(num).toPrecision(n);
      const abs = Math.abs(num);
      let displayStr;
      if (abs >= 1e-3 && abs < 1e6 && !p.includes("e")) {
        displayStr = p; // decimal comum
      } else {
        // notação científica com ×10^
        displayStr = Number(num).toExponential(n-1).replace("e+", "×10^").replace("e-", "×10^-");
      }
      // separar expoente (se houver) e destacar último dígito significativo da parte base
      const expMatch = displayStr.match(/(×10\^[\+\-]?\d+)$/);
      const base = expMatch ? displayStr.replace(expMatch[1], "") : displayStr;
      if (base.length === 0) return displayStr; // segurança
      const baseHL = base.slice(0, -1) + '<span class="highlight">' + base.slice(-1) + '</span>';
      return expMatch ? baseHL + expMatch[1] : baseHL;
    }

    function update(){
      const ex = examples[idx];
      setText("exampleIndex", (idx+1));
      setText("exampleCount", examples.length);
      setText("unit", ex.unit);
      setText("sfLabel", sigFigs);
      setText("sfInline", sigFigs);
      setText("labelValue", ex.label);

      const rounded = Number(ex.value).toPrecision(sigFigs);
      const big = formatDisplayHighlighted(ex.value, sigFigs);

      document.getElementById("digits").innerHTML = big; // usa innerHTML por causa do highlight
      setText("rawValue", ex.rawStr + (ex.unit ? " " + ex.unit : ""));
      setText("roundedValue", `${rounded}${ex.unit ? " " + ex.unit : ""}`);
      setText("sciValue", `${formatSci(ex.value, sigFigs)}${ex.unit ? " " + ex.unit : ""}`);
      setText("resolution", ex.resolution || "—");

      document.title = `${ex.label} — Balança Digital`;
    }

    function next(){ idx = (idx + 1) % examples.length; pulseToast(); update(); }
    function prev(){ idx = (idx - 1 + examples.length) % examples.length; pulseToast(); update(); }
    function inc(){ sigFigs = Math.min(MAX_SF, sigFigs + 1); pulseToast(); update(); }
    function dec(){ sigFigs = Math.max(MIN_SF, sigFigs - 1); pulseToast(); update(); }
    function reset(){ idx = 0; sigFigs = 3; update(); }

    // UI
    document.getElementById("nextBtn").addEventListener("click", next);
    document.getElementById("prevBtn").addEventListener("click", prev);
    document.getElementById("incSf").addEventListener("click", inc);
    document.getElementById("decSf").addEventListener("click", dec);
    document.getElementById("resetBtn").addEventListener("click", reset);
    window.addEventListener("keydown", (e)=>{
      if (e.key === "ArrowRight") next();
      else if (e.key === "ArrowLeft") prev();
      else if (e.key === "ArrowUp") inc();
      else if (e.key === "ArrowDown") dec();
      else if (e.key.toLowerCase() === "r") reset();
    });

    // Toast
    let toastTimer = null;
    function pulseToast(msg){
      const el = document.getElementById("toast");
      if (msg) el.textContent = msg;
      el.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=> el.classList.remove("show"), 900);
    }

    // init
    update();
    setTimeout(()=>{
      const el = document.getElementById("toast");
      el.textContent = "Use ←/→ para navegar e ↑/↓ para algarismos significativos.";
      el.classList.add("show");
      setTimeout(()=> el.classList.remove("show"), 2500);
    }, 600);
  </script>
</body>
</html>
